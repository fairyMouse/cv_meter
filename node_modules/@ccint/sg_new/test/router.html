<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Test</title>
  <style>
    body{
      margin:0;
      text-align: center;
    }
    .p_home{
      background-color:#cccccc!important;
    }
    .p_list{
      background-color:#aaaaaa!important;
    }
  </style>
</head>
<body>
<div class="main" id="main"></div>
<script type="text/template" class="p_home sg_scroll_y" id="home">
  <div>home</div>
  <div style="height: 1000px;">
		<pre style="height: 500px;">
			123123
			123123
			123123
			123123
			123123
			123123
			123123
			123123
			123123
			123123
			123123
			123123123123
			123123
			123123
			123123
			123123
			123123123123
			123123
			123123
			123123
			123123
			123123
		</pre>
  </div>
  <input type="button" value="跳转List" id="btn_redirect_list">
  <input type="button" value="跳转List(带参数)" id="btn_redirect_list_with_param">
  <input type="button" value="跳转404" id="btn_redirect_404">
  <input type="button" value="跳转List(删除历史)" id="btn_redirect_list_no_history">
</script>
<script type="text/template" class="p_list sg_scroll_y" id="list">
  <div style="height:2000px;" id="title">list</div>
  {{if data}}
  {{each data as value index}}
  <div>{{index}} : {{value}}</div>
  {{/each}}
  {{/if}}
</script>
<script type="text/template" id="error_404">
  <div>404</div>
</script>

<script type="text/javascript" src="../node_modules/jquery/dist/jquery.min.js"></script>
<script type="text/javascript" src="../node_modules/art-template/lib/template-web.js"></script>
<script type="text/javascript" src="../dist/sg.min.js"></script>
<script type="text/javascript" src="../dist/router.min.js"></script>
<script>
  sg.init({
    baseUrl : '',
    resource : {
      list : {
        filters : ['login']
      },
      home : {

      }
    },
    routes : {
      '' : 'home',
      'list' : 'list'
    },
    error : {
      '404' : 'error_404'
    },
    parent : $('#main'),
    animation : 'slide_small',
    html4Mode : true,
    title : 'HashRouter',
    needCache : true,
    debug : true,
    fixDirection : true
  });
  sg.router.start();
  sg.View.define('list', {
    needCache : true,
    onBeforeRender : function(next) {
      var data = sg.router.current.params;
      next({
        data: data
      });
    },
    onRender : function() {
      var self = this,
        $dom = self.$parent;
      $(window).scrollTop(500);
    }
  });

  sg.View.define('home', {
    onRender: function() {
      var self = this;
      var $dom = self.$parent;
      $dom.find('#btn_redirect_list').on('click', function() {
        sg.router.redirect('list');
      });
      $dom.find('#btn_redirect_list_with_param').on('click', function() {
        sg.router.redirect('list', {
          a: 1,
          b: 2,
          c: 3
        });
      });
      $dom.find('#btn_redirect_404').on('click', function() {
        sg.router.redirect('list1');
      });
      $dom.find('#btn_redirect_list_no_history').on('click', function() {
        sg.router.redirect('list', null, true);
      });
    }
  });
</script>
</body>
</html>