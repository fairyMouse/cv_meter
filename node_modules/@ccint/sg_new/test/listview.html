<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no,shrink-to-fit=no">
	<style>
		body{
			margin:0;
			text-align: center;
		}
		/* 块内元素布局去除inline-block间距，兼容ie7,safari（类加在父元素） */
		.ib, .ib .ib {
			letter-spacing: -4px;
			font-size: 0;
		}
		.ib > div, .ib > label, .ib > a, .ib > span, .ib > li, .ib > input {
			display: inline-block;
			letter-spacing: 0;
			font-size: 14px;
			*zoom: 1;
			*display: inline;
		}
	</style>
	<title>list view</title>
</head>
<body>
<div class="main" id="main">
	<div>list view demo</div>
	<div id="listview"></div>
</div>
<button id="btn_next">加载</button>
<!-- 每个列表内部的元素viewmodel模板 -->
<script type="text/template" id="listitems">
	<div>{{name}}</div>
</script>
<script type="text/javascript" src="../node_modules/jquery/dist/jquery.min.js"></script>
<script type="text/javascript" src="../node_modules/art-template/lib/template-web.js"></script>
<script type="text/javascript" src="../dist/sg.min.js"></script>
<script type="text/javascript" src="../dist/listview.min.js"></script>
<script>
	sg.init();
	var listview = sg.Component.ListView($('#listview'), {
		item_vm: 'listitems', // 列表元素的viewmodel
		url: 'listview.php',	// 请求数据的接口
		start: 0,							// 分页起始值
		limit: 19,							// 分页limit
		params: {							// 传入接口的参数
			directory: './' 
		},
		format: {							// 分页参数的参数名(默认为start和limit)
			start: 'start',
			limit: 'len'
		},
		method: 'GET',

		// 子模块afterRender函数
		itemAfterRender: function($dom) {	
			$dom.bind('mouseenter', function() {
					$dom.css('background-color', '#cccccc');
			});
			$dom.bind('mouseout', function() {
					$dom.css('background-color', '#ffffff');
			});
			$dom.bind('click', function() {
					location.href = $.trim($dom.text());
			});
		}
	});
	$('#btn_next').bind('click', function() {
		var $self = $(this);
		listview.append(function(data) {
			if (!data.length) {
				$self.text('没了');
			} else {
				$self.text('还有');
			}
		});
	});
</script>
</body>
</html>
